/*! webapp 2014-10-27 */
var FedApp=FedApp||{};FedApp.Components=FedApp.Components||{},FedApp.Models=FedApp.Models||{},FedApp.Views=FedApp.Views||{},function(){FedApp.App={init:function(){console.log("Initialize App"),FedApp.Config={appId:"fed-app"},this.startApp()},startApp:function(){FedApp.Router.init()}}}(),function(){FedApp.Router={currentView:!1,init:function(){{var a={"":function(){console.log("empty"),FedApp.Components.Loader.show(),FedApp.Router.showMain()},"/home":function(){console.log("/home"),FedApp.Components.Loader.show(),FedApp.Router.showMain()},"/about":function(){console.log("/about"),FedApp.Components.Loader.show(),FedApp.Router.showAbout()},"/main":{"/:type":{on:function(a){console.log("main/"+a),FedApp.Components.Loader.show(),FedApp.Router.showList({type:a,locality:!1})}}},"/main/:type/search":{"/:search":{on:function(a,b){console.log("/main/"+a+"/search/"+b),FedApp.Components.Loader.show(),FedApp.Router.showList({type:a,locality:b})}}},"/main/:type/detail":{"/:cidn":{on:function(a,b){console.log("/main/:"+a+"/detail/"+b),FedApp.Components.Loader.show(),FedApp.Router.showDetail({type:a,cidn:b})}}},"/*":function(){FedApp.Components.Loader.show(),FedApp.Router.showPage404()}};Router(a).init()}},showMain:function(){console.log("show main");var a=new FedApp.Views.Main;FedApp.Router.showView(a)},showList:function(a){console.log("show list");var b=new FedApp.Models.List;b.get({type:a.type,params:{page:1,per_page:100,locality:a.locality,after:"2014-10-22"}}),b.events.on("loadDataComplete",function(a){console.log(a);var c=new FedApp.Views.List(a);FedApp.Router.showView(c),b.events.off("loadDataComplete")})},showDetail:function(a){console.log("show detail");var b=new FedApp.Models.SingleObject;b.get({type:a.type,cidn:a.cidn}),b.events.on("loadDataComplete",function(a){console.log(a);var c=new FedApp.Views.Detail(a);FedApp.Router.showView(c),b.events.off("loadDataComplete")})},showAbout:function(){console.log("show about");var a=new FedApp.Views.About;this.showView(a)},showPage404:function(){console.log("show Page404");var a=new FedApp.Views.Page404;console.log(a),a.events.on("load404Complete",function(a){this.showView(a)})},showView:function(a){console.log("show View"),FedApp.Router.currentView=a;var b=document.getElementById(FedApp.Config.appId);b.innerHTML=FedApp.Router.currentView.render(),FedApp.Router.currentView.afterRender&&FedApp.Router.currentView.afterRender(),FedApp.Components.Loader.hide()}}}(),function(){FedApp.Components.Loader={loading:!1,show:function(){var a=document.getElementById("loader");a.hasClass("loader--inactive")&&(a.addClass("loader--isactive"),a.removeClass("loader--inactive"))},hide:function(){var a=document.getElementById("loader");a.hasClass("loader--isactive")&&(a.addClass("loader--inactive"),a.removeClass("loader--isactive"))}}}(),function(){var a=function(){this.path="http://api.artsholland.com/rest",this.events=new Events,this.init=function(){console.log("Initialize List model")},this.get=function(a){var b=this,c=a.type;a.params.locality||(a.params.locality="amsterdam");var d=a.params,e=this.path+"/"+c+".json";JSONP({url:e,data:d,success:function(a){b.filterList({type:c,data:a})},error:this.onErrorHandler})},this.filterList=function(a){for(var b=a.data,c=0;c<b.results.length;c++){var d=b.results[c];d.listType=a.type,d.attachment||(d.attachment="No attachment"),d.created||(d.created="No created date"),d.description||(d.description="No description"),d.eventStatus||(d.eventStatus="No event status"),d.genre||(d.genre="No genre"),d.hasBeginning||(d.hasBeginning="Has no beginning"),d.hasEnd||(d.hasEnd="Has no end"),d.homepage||(d.homepage="Has no homepage"),d.languageNoProblem||(d.languageNoProblem="No language problems"),d.modified||(d.modified="Not mofified"),d.offers||(d.offers="No offers"),d.production||(d.production="No production"),d.productionType||(d.productionType="Has no production type"),d.sameAs||(d.sameAs="Nothing the same as"),d.title||(d.title="Undefined"),d.type||(d.type="Has no type"),d.uri||(d.uri="Has no uri"),d.venue||(d.venue="Has no venue"),d.venueType||(d.venueType="Has no venue type")}b.metadata.listType=a.type,this.events.emit("loadDataComplete",b)},this.onErrorHandler=function(a){alert("ERROR: "+a)},this.init()};FedApp.Models.List=a}(),function(){var a=function(a){this.path="http://api.artsholland.com/rest",this.events=new Events,this.type=!1,this.init=function(){console.log("Initialize SingelObject model")},this.get=function(a){console.log(a);var b=this,c=a.cidn.toLowerCase();this.type=a.type;var d=this.path+"/"+this.type+"/"+c+".json";JSONP({url:d,success:function(a){b.filterSingelObj(a)},error:this.onErrorHandler})},this.filterSingelObj=function(a){var b=a.results[0];if(console.log(b),b.created||(b.created="No data about creation"),b.description||(b.description="No description"),b.email||(b.email="No email"),b.homepage||(b.homepage="No homepage"),b.locationAddress||(b.locationAddress="No location address"),b.listType||(b.listType=this.type),b.modified){if(typeof b.modified==typeof[]){for(var c="",d=0;d<b.modified.length;d++)c+=", "+b.modified[d];b.modified=c.slice(2)}}else b.modified="No information about modification";b.sameAs||(b.sameAs="Noting same as"),b.shortDescription||(b.shortDescription="No short description"),b.telephone||(b.telephone="No telephone"),b.title||(b.title="Untitled"),b.type||(b.type="No type"),b.uri||(b.uri="No uri"),b.venueType||(b.venueType="No venue type"),this.events.emit("loadDataComplete",b)},this.onErrorHandler=function(a){alert("ERROR: "+a)},this.init(a)};FedApp.Models.SingleObject=a}(),function(){var a=function(a){this.template="template-about",this.model=!1,this.events=new Events,this.init=function(){console.log("Initalize About")},this.render=function(){var a=document.getElementById(this.template),b=a.innerHTML,c=Handlebars.compile(b);return c()},this.init(a)};FedApp.Views.About=a}(),function(){var a=function(a){this.template="template-detail",this.model=!1,this.events=new Events,this.init=function(a){console.log("Initialize Detail View"),this.model=a},this.render=function(){var a=document.getElementById(this.template),b=a.innerHTML,c=Handlebars.compile(b);return c(this.model)},this.afterRender=function(){console.log("afterRender")},this.dispose=function(){},this.init(a)};FedApp.Views.Detail=a}(),function(){var a=function(a){this.template="template-list",this.model=!1,this.events=new Events,this.init=function(a){console.log("Initialize List view"),this.model=a},this.render=function(){var a=document.getElementById(this.template),b=a.innerHTML,c=Handlebars.compile(b);return c(this.model)},this.afterRender=function(){console.log("List afterRender");var a=document.getElementById("form-btn-submit");a.addEventListener("click",this.onClickHandler)},this.dispose=function(){},this.onClickHandler=function(){var a=document.getElementById("form-input-locality");console.log(window),alert(a?"Zoek: "+a.value:"Graag een stad invullen")},this.onKeyPressHandler=function(b){if(13==b.keyCode){console.log(a);var c="event",d=b.target.value;routie("main/"+c+"/"+d)}},this.init(a)};FedApp.Views.List=a}(),function(){var a=function(a){this.template="template-main",this.model=!1,this.events=new Events,this.init=function(){console.log("Initialize main")},this.render=function(){var a=document.getElementById(this.template),b=a.innerHTML,c=Handlebars.compile(b);return c()},this.init(a)};FedApp.Views.Main=a}(),function(){var a=function(a){this.template="template-404",this.events=new Events,this.init=function(){this.render()},this.render=function(){var a=document.getElementById(this.template),b=a.innerHTML,c=Handlebars.compile(b);return c()},this.init(a)};FedApp.Views.Page404=a}();