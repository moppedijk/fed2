/*! webapp 2014-10-21 */
var fedApp=fedApp||{};fedApp.helpers=fedApp.helpers||{},fedApp.data=fedApp.data||{},fedApp.views=fedApp.views||{},function(){fedApp.app={init:function(){fedApp.config={appId:"fed-app"},this.startApp()},startApp:function(){fedApp.router.init(),console.log("router init")}}}(),function(){fedApp.router={currentView:!1,init:function(){routie({"":function(){console.log("show main"),fedApp.helpers.loader.show(),fedApp.router.showHome()},main:function(){console.log("show main"),fedApp.helpers.loader.show(),fedApp.router.showMain()},"main/:type":function(a){console.log("show "+a),fedApp.helpers.loader.show(),fedApp.router.showList(a)},"main/:type/:cidn":function(a,b){console.log("show "+a+" : "+b),fedApp.helpers.loader.show(),fedApp.router.showDetail(a,b)},about:function(){console.log("show about"),fedApp.helpers.loader.show(),fedApp.router.showAbout()},"*":function(){fedApp.helpers.loader.show(),fedApp.router.showPage404()}})},showMain:function(){console.log("showMain");var a=new fedApp.views.Main;fedApp.router.showView(a)},showList:function(a){console.log("show Event");var b=new fedApp.data.ArtsApi;b.getList({type:a,params:{per_page:20,page:1,locality:"utrecht"}}),b.events.on("loadListComplete",function(a){var c=new fedApp.views.List(a);fedApp.router.showView(c),b.events.off("loadListComplete")})},showDetail:function(a,b){console.log("showDetail");var c=new fedApp.data.ArtsApi;c.getSingleObject({type:a,cidn:b}),c.events.on("loadSingleComplete",function(a){var b=new fedApp.views.Detail(a);fedApp.router.showView(b),c.events.off("loadSingleComplete")})},showAbout:function(){console.log("showAbout");var a=new fedApp.views.About;this.showView(a)},showPage404:function(){console.log("showPage404");var a=new fedApp.views.Page404;this.showView(a)},showView:function(a){console.log("show View"),fedApp.router.currentView&&console.log("remove view"),fedApp.router.currentView=a;var b=document.getElementById(fedApp.config.appId);b.innerHTML=fedApp.router.currentView.render(),fedApp.helpers.loader.hide()}}}(),function(){fedApp.helpers.loader={loading:!1,show:function(){var a=document.getElementById("loader");a.hasClass("loader--inactive")&&(a.addClass("loader--isactive"),a.removeClass("loader--inactive"))},hide:function(){var a=document.getElementById("loader");a.hasClass("loader--isactive")&&(a.addClass("loader--inactive"),a.removeClass("loader--isactive"))}}}(),function(){var a=function(){this.path="http://api.artsholland.com/rest",this.events=new Events,this.getList=function(a){var b=this,c=a.type,d=a.params,e=this.path+"/"+c+".json";JSONP({url:e,data:d,success:function(a){for(var d=0;d<a.results.length;d++)a.results[d].listType=c;b.events.emit("loadListComplete",a)},error:this.onErrorHandler})},this.getSingleObject=function(a){var b=this,c=a.type,d=a.cidn.toLowerCase(),e=this.path+"/"+c+"/"+d+".json";JSONP({url:e,success:function(a){a.results[0].listType=c,b.events.emit("loadSingleComplete",a)},error:this.onErrorHandler})},this.getChildRelations=function(a){var b=this,c=a.type,d=a.cidn.toLowerCase(),e=a.relation,f=this.path+"/"+c+"/"+d+"/"+e;JSONP({url:f,success:function(a){b.events.emit("loadChildRelationsComplete",a)},error:this.onErrorHandler})},this.onErrorHandler=function(a){alert("ERROR: "+a)}};fedApp.data.ArtsApi=a}(),function(){var a=function(){this.template="template-about",this.render=function(){var a=document.getElementById(this.template),b=a.innerHTML,c=Handlebars.compile(b);return c()}};fedApp.views.About=a}(),function(){var a=function(a){this.template="template-detail",this.render=function(){var b=document.getElementById(this.template),c=b.innerHTML,d=Handlebars.compile(c);return d(a.results[0])}};fedApp.views.Detail=a}(),function(){var a=function(a){this.template="template-list",this.render=function(){console.log(a);var b=document.getElementById(this.template),c=b.innerHTML,d=Handlebars.compile(c);return d(a)}};fedApp.views.List=a}(),function(){var a=function(a){this.template="template-main",this.render=function(){console.log(a);var b=document.getElementById(this.template),c=b.innerHTML,d=Handlebars.compile(c);return d(a)}};fedApp.views.Main=a}(),function(){var a=function(){this.template="template-404",this.render=function(){var a=document.getElementById(this.template),b=a.innerHTML,c=Handlebars.compile(b);return c()}};fedApp.views.Page404=a}();