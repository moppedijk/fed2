/*! geo-app 2014-09-11 */
var geo=geo||{};!function(){"use strict";geo.config={sanbox:"SANDBOX",lineair:"LINEAIR",gpsAvailable:"GPS_AVAILABLE",gpsUnavailable:"GPS_UNAVAILABLE",positionUpdated:"POSITION_UPDATED",refreshRate:1e3,currentPosition:!1,currentPositionMarker:!1,customDebugging:!1,debugId:!1,map:!1,interval:!1,intervalCounter:!1,updateMap:!1,locatieRij:markerRij=[],locations:[]},geo.controller={init:function(){geo.helpers.debugMessage("Controleer of GPS beschikbaar is..."),ET.addListener(geo.config.gpsAvailable,geo.gps.startInterval),ET.addListener(geo.config.gpsUnavailable,function(){geo.helpers.debugMessage("GPS is niet beschikbaar.")}),ET.fire(geo_position_js.init()?geo.config.gpsAvailable:geo.config.gpsUnavailable)},info:function(){}},geo.gps={startInterval:function(){geo.helpers.debugMessage("GPS is beschikbaar, vraag positie."),this.updatePosition(),geo.config.interval=self.setInterval(this.updatePosition,geo.config.refreshRate),ET.addListener(geo.config.positionUpdated,this.checkLocations)},updatePosition:function(){geo.config.intervalCounter++,geo_position_js.getCurrentPosition(this.setPosition,_geo_error_handler,{enableHighAccuracy:!0})},setPosition:function(a){geo.config.currentPosition=a,ET.fire("POSITION_UPDATED"),geo.helpers.debugMessage(geo.config.intervalCounter+" positie lat:"+geo.config.currentPosition.coords.latitude+" long:"+geo.config.currentPosition.coords.longitude)},checkLocations:function(){for(var a=0;a<geo.config.locations.length;a++){var b={coords:{latitude:geo.config.locations[a][3],longitude:geo.config.locations[a][4]}};if(this.calculateDistance(b,geo.config.currentPosition)<geo.config.locations[a][2]&&window.location!=geo.config.locations[a][1]&&"false"==localStorage[geo.config.locations[a][0]]){try{"false"==localStorage[geo.config.locations[a][0]]?localStorage[geo.config.locations[a][0]]=1:localStorage[geo.config.locations[a][0]]++}catch(c){geo.helpers.debugMessage("Localstorage kan niet aangesproken worden: "+c)}window.location=geo.config.locations[a][1],geo.helpers.debugMessage("Speler is binnen een straal van "+geo.config.locations[a][2]+" meter van "+geo.config.locations[a][0])}}},calculateDistance:function(a,b){var c=new google.maps.LatLng(a.coords.latitude,a.coords.longitude),d=new google.maps.LatLng(b.coords.latitude,b.coords.longitude);return Math.round(google.maps.geometry.spherical.computeDistanceBetween(c,d),0)}},geo.map={},geo.helpers={isNumber:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},geo_error_handler:function(a,b){debug_message("geo.js error: "+a+": "+b)},debugMessage:function(a){geo.config.customDebugging&&geo.config.debugId?document.getElementById(geo.config.debugId).innerHTML:console.log(a)},setCustomDebugging:function(){geo.config.debugId=this.debugId,geo.condig.customDebugging=!0}}}();